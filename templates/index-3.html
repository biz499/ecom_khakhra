{% for product in products %}
<div class="col-lg-12">
    <div class="ltn__product-item ltn__product-item-3 text-center">
        <div class="product-img">
            <img src="{{ product.image.url }}" alt="{{ product.name }}">
            {% if product.on_sale %}
            <div class="product-badge">
                <ul>
                    <li class="sale-badge">-{{ product.discount_percent }}%</li>
                </ul>
            </div>
            {% endif %}
            <div class="product-hover-action">
                <ul>
                    <li>
                        <a href="#" title="Quick View" data-bs-toggle="modal" data-bs-target="#quick_view_modal_{{ product.id }}">
                            <i class="far fa-eye"></i>
                        </a>
                    </li>
                    <li>
                        <a href="#" title="Add to Cart" class="add-to-cart-btn"
                           data-product-id="{{ product.id }}"
                           data-product-name="{{ product.name }}"
                           data-product-image="{{ product.image.url }}">
                            <i class="fas fa-shopping-cart"></i>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
        <div class="product-info">
            <h2 class="product-title"><a href="#">{{ product.name }}</a></h2>
            <div class="product-price">
                <span>${{ product.price }}</span>
                {% if product.on_sale %}
                <del>${{ product.original_price }}</del>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endfor %}
<script>
document.addEventListener("DOMContentLoaded", function () {
    var addToCartButtons = document.querySelectorAll('.add-to-cart-btn');
    var modalProductImage = document.getElementById('modal-product-image');
    var modalProductName = document.getElementById('modal-product-name');

    addToCartButtons.forEach(function (button) {
        button.addEventListener('click', function (event) {
            event.preventDefault();
            var productName = this.getAttribute('data-product-name');
            var productImage = this.getAttribute('data-product-image');

            // Update modal content with product details
            modalProductImage.setAttribute('src', productImage);
            modalProductName.textContent = productName;

            // Show the modal
            $('#add_to_cart_modal').modal('show');
        });
    });
});
</script>
